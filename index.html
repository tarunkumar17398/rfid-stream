<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>RFID LIVE</title>
    <style>
      body { font-family:Arial; padding:20px; font-size:22px; }
      .tag { padding:8px; border-bottom:1px solid #ddd; }
      #readerInput{ 
        opacity:0; 
        position:absolute; 
        left:0; 
        top:0; 
      }
    </style>
  </head>
  <body>
    <h2>RFID LIVE VIEW</h2>

    <input id="readerInput" autofocus />

    <div id="list"></div>

    <script>
      const reader = document.getElementById("readerInput");
      const list = document.getElementById("list");

      // always keep focus on hidden input
      setInterval(()=> reader.focus(), 80);

      let buffer = "";

      reader.addEventListener("input", ()=>{
        let txt = reader.value;
        
        // if Enter pressed => tag completed
        if(txt.includes('\n')){
          const tag = buffer.trim();
          buffer = "";
          reader.value = "";
          if(tag.length > 0){
            const div = document.createElement("div");
            div.className="tag";
            div.innerText = tag;
            list.prepend(div);
          }
        }else{
          buffer += txt;
          reader.value = "";
        }
      });
    </script>

  </body>
</html>
